[opener]
pix = [{ run = 'pix "$@"', orphan = true, desc = "Pix image viewer" }]

zathura = [
    { run = 'zathura "$@"', orphan = true, desc = "Zathura Document viewer" },
]

vscode = [
    { run = 'code "$@"', block = false, orphan = true, desc = "Vscode editor" },
]

[open]
prepend_rules = [
    { mime = "image/*", use = "pix" },

    { name = "*.mmd", use = "vscode" },
]

[plugin]

prepend_previewers = [
    { name = "*.csv", run = "rich-preview" },   # for csv files
    { name = "*.md", run = "rich-preview" },    # for markdown (.md) files
    { name = "*.rst", run = "rich-preview" },   # for restructured text (.rst) files
    { name = "*.ipynb", run = "rich-preview" }, # for jupyter notebooks (.ipynb)
    { name = "*.json", run = "rich-preview" },  # for json (.json) files
    #    { name = "*.lang_type", run = "rich-preview"} # for particular language files eg. .py, .go., .lua, etc.
    # Replace magick, image, video with mediainfo
    { mime = "{audio,video,image}/*", run = "mediainfo"},
    { mime = "application/subrip", run = "mediainfo" },
    # Adobe Illustrator, Adobe Photoshop is image/adobe.photoshop, already handled above
    { mime = "application/postscript", run = "mediainfo" },
]

prepend_preloaders = [
  # Replace magick, image, video with mediainfo
  { mime = "{audio,video,image}/*", run = "mediainfo" },
  { mime = "application/subrip", run = "mediainfo" },
  # Adobe Illustrator, Adobe Photoshop is image/adobe.photoshop, already handled above
  { mime = "application/postscript", run = "mediainfo" },
]

# For a large file like Adobe Illustrator, Adobe Photoshop, etc
# you may need to increase the memory limit if no image is rendered.
# https://yazi-rs.github.io/docs/configuration/yazi#tasks
[tasks]
  image_alloc      = 1073741824        # = 1024*1024*1024 = 1024MB
